<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>"Django and Jade"</title>
        <link rel="stylesheet" href="http://dustinfarris.com/theme/css/main.css" />
        <link href="http://dustinfarris.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Dustin Farris Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://dustinfarris.com/">Dustin Farris </a></h1>
                <nav><ul>
                    <li class="active"><a href="http://dustinfarris.com/category/blog.html">blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="http://dustinfarris.com/2012/06/01/django-and-jade.html" rel="bookmark"
           title="Permalink to "Django and Jade"">"Django and Jade"</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-06-01T00:00:00+02:00">
                Published: Fri 01 June 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://dustinfarris.com/author/dustin-farris.html">Dustin Farris</a>
        </address>
<p>In <a href="http://dustinfarris.com/category/blog.html">blog</a>. </p>
<p>tags: <a href="http://dustinfarris.com/tag/django.html">Django</a> </p>
</footer><!-- /.post-info -->      <p>This week I made an important addition to my tool kit.  In the past I've focused primarily on ways to streamline backend development using tools like django_compressor, Sentry, and Fabric.  More recently, however, I've taken a turn and began focusing on ways to bring my frontend up to speed.</p>
<p>My initial focus was on incorporating new tools and resources like SASS, HTML5, Markdown and microdata (blog posts to follow).  I'd like to focus here, though, on my latest addition, Jade.</p>
<p><a href="http://jade-lang.com/">Jade</a> is a HTML preprocessor that dramatically reduces the bloat and messiness of your code.  It uses indented syntax(hey, kind of like Python!) and is extremely easy to learn.  Also, thanks to some terrific work by <a href="https://github.com/SyrusAkbary/pyjade">Syrus Akbary</a> who ported Jade to Python, it integrates easily with Django.</p>
<p>To get the full experience you will need PyJade by Syrus, and the Python Markdown library (if you plan to use Markdown, which I highly recommend).  Both are available on PyPi.</p>
<div class="highlight"><pre>pip install Markdown
pip install pyjade
</pre></div>


<p>Install pygments also if you plan on publishing code--see my post on <a href="http://dustinfarris.com/2012/5/goodbye-tinymce/">syntax highlighting</a> with Markdown.</p>
<p>Enabling Jade couldn't be easier.  PyJade comes with a Django "extension" which features a template loader.  The loader wraps your existing loaders.  This allows PyJade to do the Jade preprocessing first, before handing the template off to the usual suspects.  All it takes a simple modification to your settings.py <code>TEMPLATE_LOADERS</code> variable.</p>
<div class="highlight"><pre>    <span class="n">TEMPLATE_LOADERS</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s">&#39;pyjade.ext.django.Loader&#39;</span><span class="p">,</span> <span class="p">(</span>
            <span class="s">&#39;django.template.loaders.filesystem.Loader&#39;</span><span class="p">,</span>
            <span class="s">&#39;django.template.loaders.app_directories.Loader&#39;</span><span class="p">,</span>
            <span class="s">&#39;django.template.loaders.eggs.Loader&#39;</span><span class="p">,</span>
        <span class="p">)),</span>
    <span class="p">)</span>
</pre></div>


<p>With the loader in place, any '.jade' template you use in Django will be intercepted by PyJade and preprocessed.  Here is an example "base.jade":</p>
<p>{% raw %}</p>
<div class="highlight"><pre>    <span class="nn">!!! 5</span>
    <span class="nt">html</span>
        <span class="nt">head</span>
            <span class="nt">title</span>
                <span class="nt">block</span> title
                    | My Website
        <span class="nt">body</span>
            <span class="nt">header</span>
                <span class="nt">h1</span> My Website
                <span class="nt">nav</span>
                    <span class="nt">a</span>(<span class="na">href</span><span class="err">!=&#39;{%</span> <span class="na">url</span> <span class="na">home</span> <span class="err">%}&#39;</span>) Home
                    <span class="nt">a</span>(<span class="na">href</span><span class="err">!=&#39;{%</span> <span class="na">url</span> <span class="na">blog:index</span> <span class="err">%}&#39;</span>) Blog
                    <span class="nt">a</span>(<span class="na">href</span><span class="err">!=&#39;{%</span> <span class="na">url</span> <span class="na">about</span> <span class="err">%}&#39;</span>) About Me
            <span class="nf">#main</span>(<span class="na">role=</span><span class="s">&#39;main&#39;</span>)
                <span class="nt">block</span> content
                    <span class="nt">p</span> Welcome to my website
            <span class="nt">footer</span>
                <span class="nt">p</span> All content copyright by me.
</pre></div>


<p>{% endraw %}</p>
<p>Then I can do an about page.  First, in urls.py:</p>
<div class="highlight"><pre>    <span class="kn">from</span> <span class="nn">django.views.generic.simple</span> <span class="kn">import</span> <span class="n">direct_to_template</span>

    <span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">url</span><span class="p">(</span>
            <span class="s">r&#39;^about/$&#39;</span><span class="p">,</span>
            <span class="n">direct_to_template</span><span class="p">,</span>
            <span class="p">{</span><span class="s">&#39;template&#39;</span><span class="p">:</span> <span class="s">&#39;about.jade&#39;</span><span class="p">},</span>
            <span class="n">name</span><span class="o">=</span><span class="s">&#39;about&#39;</span>
        <span class="p">),</span>
        <span class="o">...</span>
</pre></div>


<p>And create about.jade which might look something like this:</p>
<div class="highlight"><pre>    <span class="nt">extends</span> base

    <span class="nt">block</span> title
        | About Me

    <span class="nt">block</span> content
        <span class="nt">article</span>
            <span class="nt">header</span>
                <span class="nt">h1</span> About Me
            <span class="nd">:markdown</span>
                <span class="nd">This is a page about me.  Be sure to check</span>
                <span class="nd">out my [Facebook Profile][1] where I post lots</span>
                <span class="nd">of crazy pictures!</span>

                <span class="nd">[1]: http://facebook.com/dustinfarris</span>
</pre></div>


<p>Because Jade is so easy to learn and use, the time investment really pays off.  I personally love how it feels sort of Pythonic with regards to indented syntax, and kicking out templates has certainly received a speed boost!</p>
    </div><!-- /.entry-content -->
    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'dustinfarris';
        var disqus_identifier = '2012/06/01/django-and-jade.html';
        var disqus_url = 'http://dustinfarris.com/2012/06/01/django-and-jade.html';
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//dustinfarris.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://dustinfarris.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-13275015-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'dustinfarris';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>